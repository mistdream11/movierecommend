doctype html
html
  head
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    title 选择推荐模式
    // 引入Inter字体（统一整套系统字体）
    link(href='https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap', rel='stylesheet')
    style.
      /* ========== 全局CSS变量（蓝紫渐变风格） ========== */
      :root {
        /* 主色调 */
        --primary: #4361ee;
        --primary-light: #5874f5;
        --primary-dark: #3a56d4;
        --primary-gradient: linear-gradient(135deg, #4361ee 0%, #7b61ee 100%);
        --primary-gradient-deep: linear-gradient(135deg, #3a56d4 0%, #6a51d4 100%);

        /* 辅助色 */
        --secondary: #f8f9fa;
        --bg-header: linear-gradient(135deg, #e0f7fa 0%, #f3e5f5 100%);
        --text-main: #2d3748;
        --text-secondary: #718096;
        --text-tertiary: #5c677d;
        
        /* 功能色 */
        --error-main: #e53e3e;
        --error-light: #fef7fb;
        --error-border: #feb2b2;
        
        /* 尺寸与圆角 */
        --radius-sm: 6px;
        --radius-md: 10px;
        --radius-lg: 12px;
        --radius-xl: 16px;
        --radius-tag: 20px;
        
        /* 阴影 */
        --shadow-light: rgba(67, 97, 238, 0.08);
        --shadow-medium: rgba(67, 97, 238, 0.12);
        --shadow-strong: rgba(67, 97, 238, 0.15);
      }

      /* 基础样式重置 */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      body {
        font-family: 'Inter', sans-serif; /* 统一Inter字体 */
        background: var(--bg-header); /* 蓝紫渐变浅背景 */
        margin: 0;
        padding: 40px 20px; /* 优化移动端内边距 */
        min-height: 100vh;
        display: flex;
        align-items: center; /* 垂直居中 */
        justify-content: center;
      }

      /* 面板样式优化（蓝紫风格） */
      .panel {
        max-width: 820px;
        width: 100%;
        margin: 0 auto;
        background: var(--secondary);
        border-radius: var(--radius-lg);
        box-shadow: 0 18px 40px var(--shadow-strong); /* 蓝紫风格阴影 */
        padding: 50px 40px; /* 优化移动端内边距 */
        border: 1px solid rgba(67, 97, 238, 0.1); /* 淡蓝紫边框 */
        transform: translateY(0);
      }

      .panel:hover {
        transform: translateY(-3px);
        box-shadow: 0 24px 48px var(--shadow-medium);
      }

      h1 {
        margin: 0 0 15px;
        font-size: 40px;
        /* 标题文字渐变 */
        background: var(--primary-gradient);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        font-weight: 700;
      }

      p.desc {
        margin: 0 0 30px;
        font-size: 18px;
        color: var(--text-secondary);
        line-height: 1.6;
      }

      /* 标签样式优化（蓝紫系） */
      ul.tags {
        list-style: none;
        padding: 0;
        margin: 0 0 25px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      ul.tags li {
        background: rgba(67, 97, 238, 0.08); /* 淡蓝紫背景 */
        color: var(--primary); /* 主色文字 */
        padding: 8px 18px;
        border-radius: var(--radius-tag);
        font-size: 15px;
        font-weight: 500;
        border: 1px solid rgba(67, 97, 238, 0.1);
      }

      ul.tags li:hover {
        background: rgba(67, 97, 238, 0.15);
        transform: translateY(-2px);
      }

      /* 模式选项布局优化 */
      .mode-options {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-top: 20px;
      }

      /* 模式卡片样式优化 */
      .mode-card {
        flex: 1;
        min-width: 240px;
        border: 1px solid rgba(67, 97, 238, 0.15); /* 蓝紫系边框 */
        border-radius: var(--radius-md);
        padding: 28px;
        background: #fff;
        box-shadow: 0 8px 16px var(--shadow-light);
        display: flex;
        flex-direction: column;
      }

      .mode-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 24px var(--shadow-medium);
        border-color: var(--primary-light);
      }

      .mode-card h2 {
        margin: 0 0 12px;
        font-size: 28px;
        color: var(--text-main);
        font-weight: 600;
      }

      .mode-card p {
        margin: 0 0 30px;
        color: var(--text-tertiary);
        line-height: 1.6;
        font-size: 16px;
        flex-grow: 1;
      }

      /* 按钮样式优化（蓝紫渐变） */
      .mode-card button {
        width: 100%;
        padding: 14px 0;
        font-size: 17px;
        font-weight: 600;
        border: none;
        border-radius: var(--radius-sm);
        cursor: pointer;
        background: var(--primary-gradient); /* 蓝紫渐变背景 */
        color: #fff;
        box-shadow: 0 4px 12px var(--shadow-light);
        margin-top: auto;
      }

      .mode-card button:hover {
        background: var(--primary-gradient-deep); /* hover深色渐变 */
        transform: translateY(-2px);
        box-shadow: 0 6px 18px var(--shadow-medium);
      }

      .mode-card button:active {
        transform: translateY(0);
        box-shadow: 0 2px 8px var(--shadow-light);
      }

      /* 消息提示框样式优化 */
      .message {
        margin-bottom: 20px;
        padding: 12px 16px;
        border-radius: var(--radius-sm);
        background: var(--error-light);
        color: var(--error-main);
        border: 1px solid var(--error-border);
        font-weight: 500;
        box-shadow: 0 4px 12px rgba(229, 62, 62, 0.08);
      }

      /* 响应式适配 */
      @media (max-width: 480px) {
        .panel {
          padding: 30px 20px;
        }
        
        h1 {
          font-size: 28px;
        }
        
        .mode-card {
          min-width: 100%;
        }
      }
  body
    .panel
      h1 你好 #{username}
      p.desc 你刚刚选择了以下类型，接下来请选择推荐模式（简单：5 轮、详细：10 轮）。
      if message
        p.message #{message}
      if selectedGenres && selectedGenres.length
        ul.tags
          each genre in selectedGenres
            li #{genre}
      else
        p.desc 暂未选择任何标签。
      .mode-options
        form.mode-card(action='/chooserecommendation', method='post')
          input(type='hidden', name='userid', value=userid)
          input(type='hidden', name='username', value=username)
          input(type='hidden', name='selectedGenres', value=selectedGenresPayload)
          input(type='hidden', name='recommendMode', value='simple')
          h2 简单推荐
          p 共 5 轮，每轮 10 部电影，快速了解你的偏好。
          button(type='submit') 开始简单模式
        form.mode-card(action='/chooserecommendation', method='post')
          input(type='hidden', name='userid', value=userid)
          input(type='hidden', name='username', value=username)
          input(type='hidden', name='selectedGenres', value=selectedGenresPayload)
          input(type='hidden', name='recommendMode', value='detailed')
          h2 详细推荐
          p 共 10 轮，更全面地了解你的审美偏好。
          button(type='submit') 开始详细模式